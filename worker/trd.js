module.exports.id = 'ace/mode/trd_worker';
module.exports.src = "ace.define(\"ace/worker/mirror\",function(acequire,exports){\"use strict\";acequire(\"../range\").Range;var Document=acequire(\"../document\").Document,lang=acequire(\"../lib/lang\"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(\"\"),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on(\"change\",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:\"insert\",start:data[i],lines:data[i+1]};else var d={action:\"remove\",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define(\"ace/worker/trd-worker\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/worker/mirror\"],function(acequire,exports){console.log(\"worker start\");var oop=acequire(\"ace/lib/oop\"),Mirror=acequire(\"ace/worker/mirror\").Mirror,TrdWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(TrdWorker,Mirror),function(){this.$id=\"ace/worker/trd-worker\",this.onUpdate=function(){console.log(this.doc);var value=this.doc.getValue(),annotations=validate(value);this.sender.emit(\"annotate\",annotations)}}.call(TrdWorker.prototype),console.log(\"worker end\"),exports.TrdWorker=TrdWorker});";